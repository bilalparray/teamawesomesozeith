<!DOCTYPE html>
<html>
  <head>
    <title>Batting Order Calculator</title>
  </head>
  <body>
    <h1>Batting Order Calculator</h1>

    <h2>Current Batting Order:</h2>
    <ol id="currentOrderList"></ol>

    <button onclick="calculateNewOrder()">Calculate New Order</button>

    <h2>New Batting Order:</h2>
    <ol id="newOrderList"></ol>

    <script>
      const playerScores = {
        Bilal: [21, 0],
        Owais: [12, 19],
        Sahil: [20, 8],
        Ehsaan: [0, 47],
        Zahid: [53, 18],
        Suhail: [27, 0],
        Ishtiyaq: [5, 1],
        Ubaid: [10, 1],
        Muzamil: [10, 15],
        Liyaqat: [0, 11],
        Showket: [10, 5],
      };

      const currentBattingOrder = [
        "Sahil",
        "Ishtiyaq",
        "Owais",
        "Suhail",
        "Bilal",
        "Zahid",
        "Ehsaan",
        "Showket",
        "Muzamil",
        "Liyaqat",
        "Ubaid",
      ];

      function calculateNewBattingOrder(playerScores, currentOrder) {
        // Calculate total scores
        let totalScores = {};
        for (let player in playerScores) {
          totalScores[player] = playerScores[player].reduce((a, b) => a + b, 0);
        }

        // Extract last 3 players from the current order and sort them
        let lastThreeFromCurrentOrder = currentOrder
          .slice(8, 11)
          .sort((a, b) => totalScores[b] - totalScores[a]);

        // Sort the first 8 players by their total scores
        let firstEight = currentOrder
          .slice(0, 8)
          .sort((a, b) => totalScores[b] - totalScores[a]);

        // Split the sorted first 8 players into the top 5 and the next 3
        let topFive = firstEight.slice(0, 5);
        let nextThree = firstEight.slice(5, 8);

        // Concatenate the sorted last 3 from the current order with the top 5
        let newFirstEight = topFive.concat(lastThreeFromCurrentOrder);

        // Sort the new first 8 players again
        let newFirstEightSorted = newFirstEight.sort(
          (a, b) => totalScores[b] - totalScores[a]
        );

        // Concatenate the sorted remaining 3 players with the new first 8
        let newOrder = newFirstEightSorted.concat(nextThree);

        return newOrder;
      }

      function calculateNewOrder() {
        let newOrder = calculateNewBattingOrder(
          playerScores,
          currentBattingOrder
        );
        displayOrder(currentBattingOrder, "currentOrderList");
        displayOrder(newOrder, "newOrderList");
      }

      function displayOrder(order, elementId) {
        let orderList = document.getElementById(elementId);
        orderList.innerHTML = "";
        order.forEach((player) => {
          let totalRuns = playerScores[player].reduce((a, b) => a + b, 0);
          let li = document.createElement("li");
          li.textContent = `${player} (Total Runs: ${totalRuns}) - Scores: ${playerScores[
            player
          ].join(", ")}`;
          orderList.appendChild(li);
        });
      }

      // Display the initial current order on page load
      document.addEventListener("DOMContentLoaded", () => {
        displayOrder(currentBattingOrder, "currentOrderList");
      });
    </script>
  </body>
</html>
