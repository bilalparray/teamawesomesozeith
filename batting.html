<!DOCTYPE html>
<html>
  <head>
    <title>Batting Order Calculator</title>
  </head>
  <body>
    <h1>Batting Order Calculator</h1>

    <h2>Current Batting Order:</h2>
    <ol id="currentOrderList"></ol>

    <button onclick="calculateNewOrder()">Calculate New Order</button>

    <h2>New Batting Order:</h2>
    <ol id="newOrderList"></ol>

    <script>
      const batsmanScores = {
        BilalLastFourArray: [21, 0],
        OwaisLastFourArray: [12, 19],
        SahilLastFourArray: [20, 8],
        EhsaanLastFourArray: [0, 47],
        ZahidLastFourArray: [53, 18],
        SuhailLastFourArray: [27, 0],
        IshtiyaqLastFourArray: [5, 1],
        UbiLastFourArray: [10, 99],
        MuzamilLastFourArray: [10, 15],
        LiyaqatLastFourArray: [0, 11],
        ShowketLastFourArray: [10, 5],
      };

      const currentOrder = [
        "SahilLastFourArray",
        "IshtiyaqLastFourArray",
        "OwaisLastFourArray",
        "SuhailLastFourArray",
        "BilalLastFourArray",
        "ZahidLastFourArray",
        "EhsaanLastFourArray",
        "ShowketLastFourArray",
        "MuzamilLastFourArray",
        "LiyaqatLastFourArray",
        "UbiLastFourArray",
      ];

      function calculateNewBattingOrder(batsmanScores, currentOrder) {
        // Step 1: Calculate Total Scores
        let totalScores = {};
        for (let player in batsmanScores) {
          totalScores[player] = batsmanScores[player].reduce(
            (a, b) => a + b,
            0
          );
        }

        // Step 2: Extract Last 3 Players from the Current Order and Sort Them
        let lastThree = currentOrder.slice(8, 11);
        let lastThreeFrom11Sorted = lastThree.sort(
          (a, b) => totalScores[b] - totalScores[a]
        );

        // Step 3: Create the first 8 positions including the last three players
        let firstEight = currentOrder.slice(0, 8);

        let firstEightSorted = firstEight.sort(
          (a, b) => totalScores[b] - totalScores[a]
        );
        let lastThreeFromSortedEight = firstEightSorted
          .slice(5, 8)
          .sort((a, b) => totalScores[b] - totalScores[a]);

        let firstFive = firstEightSorted.slice(0, 5);

        let newFirstEightSorted = firstFive
          .concat(lastThreeFrom11Sorted)
          .sort((a, b) => totalScores[b] - totalScores[a]);

        let newOrder = newFirstEightSorted.concat(lastThreeFromSortedEight);

        return newOrder;
      }

      function calculateNewOrder() {
        let newOrder = calculateNewBattingOrder(batsmanScores, currentOrder);
        displayOrder(currentOrder, "currentOrderList");
        displayOrder(newOrder, "newOrderList");
      }

      function displayOrder(order, elementId) {
        let orderList = document.getElementById(elementId);
        orderList.innerHTML = "";
        order.forEach((player) => {
          let totalRuns = batsmanScores[player].reduce((a, b) => a + b, 0);
          let li = document.createElement("li");
          li.textContent = `${player} (Total Runs: ${totalRuns}) - Scores: ${batsmanScores[
            player
          ].join(", ")}`;
          orderList.appendChild(li);
        });
      }

      // Display the initial current order on page load
      document.addEventListener("DOMContentLoaded", () => {
        displayOrder(currentOrder, "currentOrderList");
      });
    </script>
  </body>
</html>
